ext.buildPropsFile = file("build.properties")

ext.updateConfigs = new Runnable() {
    @Override
    void run() {
        ext.buildProps = parseConfig(buildPropsFile)

        def secrets = file("secret.properties")
        if (secrets.exists()) {
            ext.secretProps = parseConfig(secrets)
        }
    }
}

static def parseConfig(File config) {
    config.withReader {
        def prop = new Properties()
        prop.load(it)
        return (new ConfigSlurper().parse(prop))
    }
}

updateConfigs.run()